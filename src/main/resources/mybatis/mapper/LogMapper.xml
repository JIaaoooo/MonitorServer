<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.monitorserver.mapper.LogMapper">
    <insert id="add" parameterType="map">
        insert into ${table} (ip,project_id,interface_name,in_args,out_args,exception,trait,visit_date,response_time)
        values(#{ip},#{project_id}, #{interface_name}, #{in_args}, #{out_args}, #{exception}, #{trait}, #{visit_date}, #{response_time})
    </insert>

    <update id="createTable" parameterType="String">

        CREATE TABLE IF NOT EXISTS `${table}`(
            `id` int AUTO_INCREMENT PRIMARY KEY,
            `project_id` VARCHAR(100) NOT NULL ,
            `interface_name` VARCHAR(100) NOT NULL,
            `in_args` VARCHAR(50) NOT NULL,
            `out_args` VARCHAR(50) NOT NULL,
            `exception` VARCHAR(100) NOT NULL,
            `trait` varchar(10) NOT NULL,
            `visit_date` datetime NOT NULL,
            `response_time` int NOT NULL
            );
    </update>
</mapper>
